services:
  nginx:
    image: nginx:latest
    container_name: nginx_tomford
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - client_service
    networks:
      - tomford-network
  client_service:
    image: react-app-npm
    container_name: client_service_tomford
    build: ./client_service
    stdin_open: true
    ports:
      - "3000:3000"
    volumes:
      - "./client_service:/app/client_service:delegated"
      - /app/client_service/node_modules/
    networks:
      - tomford-network
    environment:
      - CHOKIDAR_USEPOLLING=true

networks:
  tomford-network:
    driver: bridge